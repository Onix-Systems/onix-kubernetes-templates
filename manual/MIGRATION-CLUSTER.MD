# Миграция кластера на новые сервера

### 1. Подготовить новые инстансы для кластера. 
На даный момент нужно минимум 2 инстанса (Master-Worker). 
В качестве ОС используем чистую **Ubuntu 18.04**.
Так как на Master node будет работать Gitlab и database services, минимум для Master node нужно 8Gb RAM и SSD накопитель что бы ускорить CI\CD.
Worker node минимум 32Gb RAM



### 2. Подготовить инстансы. 
Проверить что бы на новых инстансах не было запщено ничего что бы использовало TCP порты 80 443 3306 5432 27017 6443

### 3. Переключаем DNS.
Переключить DNS на свежие инстансы либо зарегистрировать новые. Обязательно дождаться переключения, это важно для дальшейшей настройки

### 4. Останавливаем текущий активный Gitlab.
Этот пункт важен дня того что бы сделать последний актуальный бекап

### 5. Останавливаем Database services.
Этот пункт важен дня того что бы сделать последний актуальный бекап staging databases
